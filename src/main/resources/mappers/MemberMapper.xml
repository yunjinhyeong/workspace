<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.co.zzimcar.dao.MemberDao">

  <select id="login" parameterType="MemberReqDto" resultType="MemberDto">
    select
    m.pid, m.name, m.department_pid, m.role
    from
    workspace.member m
    where
    m.name = #{name} and m.pw = #{pw}
  </select>

  <insert id="create" parameterType="MemberReqDto">
    INSERT workspace.member (
    department_pid, pid, name, role
    ) VALUES (
    #{departmentPid}, #{pid}, #{name}, #{role}
    )
  </insert>

  <select id="countByPid" parameterType="int" resultType="int">
    select
    count(*)
    from
    workspace.member m
    where
    m.pid = #{pid}
  </select>

  <insert id="testjoinmember" parameterType="TestMember">
    INSERT workspace.testmember (
        department_pid, id, name, role, pw
    ) VALUES (
        #{departmentPid}, #{id}, #{name}, #{role}, #{pw}
    )
  </insert>

  <select id="getapw" parameterType="String" resultType="String">
    select
      pw
    from
      workspace.testmember tm
    where
      tm.id = #{id}
  </select>

  <select id="testlogin" parameterType="TestLoginMember" resultType="TestMember">
    select
      tm.pid, tm.department_pid, tm.id, tm.name, tm.role, tm.pw
    from
      workspace.testmember tm
    where
      tm.id = #{id}
  </select>

</mapper>