<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.co.zzimcar.dao.MemberDao">

  <select id="login" parameterType="MemberLoginReqDto" resultType="MemberDataResDto">
    select
    m.id, m.department_pid, m.name, m.role, m.password
    from
    workspace.testmember m
    where
    m.id = #{id}
  </select>

  <insert id="create" parameterType="MemberReqDto">
    INSERT workspace.testmember (
    id, department_pid, name, role, password
    ) VALUES (
    #{id}, #{departmentPid}, #{name}, #{role}, #{password}
    )
  </insert>

  <select id="getPassword" parameterType="String" resultType="String">
    select
      password
    from
      workspace.testmember tm
    where
      tm.id = #{id}
  </select>

  <select id="getCountById" resultType="int">
    SELECT
      COUNT(*)
    FROM
      workspace.member
    WHERE
      id = #{id}
  </select>










  <select id="findById"  parameterType="String" resultType="Account">
    SELECT * FROM workspace.user_info
    WHERE ID= #{id}
  </select>

  <select id="readAuthorites"  parameterType="String" resultType="String">
    SELECT AUTHORITY_NAME
    FROM workspace.authority WHERE USERNAME=#{userName}
  </select>

  <insert id="insertUser" parameterType="Account">
    INSERT workspace.user_info
		VALUES (
    #{id},
    #{password},
    #{isAccountNonExpired},
    #{isAccountNonLocked},
    #{isCredentialsNonExpired},
    #{isEnabled}
    )
  </insert>

  <insert id="insertUserAuthority" parameterType="Authority">
    INSERT INTO workspace.authority
    VALUES (
      #{userName},
      #{authorityName}
      )
  </insert>

</mapper>